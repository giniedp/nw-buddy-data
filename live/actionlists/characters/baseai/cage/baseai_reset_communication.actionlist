<ActionList>
	<Actions>
		<Action Name="Reset_Move" FragmentName="Move_Combat">
			<ActivationCondition>
				<IfHTNCAGEAction ActionName="Reset_Move_CAGE_Task"/>
			</ActivationCondition>
			<DeactivationCondition/>
			<Activities>
				<HTNPlanDoneActivity>
					<Default InvalidatePlanOnExit="false" InvalidatePlanOnReinstall="false" CompletionFragmentOffset="0.0"/>
				</HTNPlanDoneActivity>
				<ClearStimuli>
					<Default TriggerOption="OnExit" DelayTime="0.0"/>
				</ClearStimuli>
				<ClearBlackboardFact>
					<Default>
						<FactsToRemoveOnExit>
							<FactName FactName="Is_Communication_In_Progress"/>
							<FactName FactName="Completed_Communication_Count"/>
							<FactName FactName="Communicator_ID"/>
							<FactName FactName="Cached_Communicator_ID"/>
							<FactName FactName="Is_Transmitter_Main_Action_Completed"/>
							<FactName FactName="Is_Receiver_Main_Action_Completed"/>
							<FactName FactName="Notified_Transmitter_Of_Completion"/>
						</FactsToRemoveOnExit>
					</Default>
				</ClearBlackboardFact>
				<ClearDynamicTags>
					<Default TriggerOption="OnExit"/>
				</ClearDynamicTags>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="ResetAI"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="ResetAI"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse ResetWhenReinstalled="true" Comment="Despawn minions on death or leash">
					<IfCondition>
						<IfMannequinTag TagName="HasSummonedMinion"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<AIAssignOrder>
								<Default Order="Despawn"/>
							</AIAssignOrder>
							<SetMannequinTag ResetWhenReinstalled="true">
								<Default TagName="HasSummonedMinion" OnEnter="Unset" OnExit="Unset" DelayTimer="0.2"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
					<ElseActivity/>
				</IfThenElse>
				<DisableCollision>
					<Default disableActorToActorCollision="true" disableTerrainCollision="false"/>
				</DisableCollision>
				<SetMannequinTag ResetWhenReinstalled="true">
					<Default TagName="Reset" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
				</SetMannequinTag>
				<SetMannequinTag ResetWhenReinstalled="true">
					<Default TagName="Alerted" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
				</SetMannequinTag>
				<SetMannequinTag ResetWhenReinstalled="true">
					<Default TagName="Block" OnEnter="NoEffect" OnExit="Unset" DelayTimer="0.0"/>
				</SetMannequinTag>
				<ClearStimuli>
					<Default TriggerOption="OnExit" DelayTime="0.0"/>
				</ClearStimuli>
				<ClearBlackboardFact>
					<Default>
						<FactsToApplyOnExit>
							<FactName FactName="Is_Communication_In_Progress"/>
							<FactName FactName="Completed_Communication_Count"/>
							<FactName FactName="Communicator_ID"/>
							<FactName FactName="Cached_Communicator_ID"/>
							<FactName FactName="Is_Transmitter_Main_Action_Completed"/>
							<FactName FactName="Is_Receiver_Main_Action_Completed"/>
							<FactName FactName="Notified_Transmitter_Of_Completion"/>
						</FactsToApplyOnExit>
					</Default>
				</ClearBlackboardFact>
				<ClearDynamicTags>
					<Default TriggerOption="OnExit"/>
				</ClearDynamicTags>
			</Activities>
		</Action>
		<Action Name="Reset_Idle" FragmentName="Combat_Idle">
			<ActivationCondition>
				<IfHTNCAGEAction ActionName="Reset_Idle_CAGE_Task"/>
			</ActivationCondition>
			<DeactivationCondition/>
			<Activities>
				<HTNPlanDoneActivity>
					<Default InvalidatePlanOnExit="false" InvalidatePlanOnReinstall="false" CompletionFragmentOffset="0.0"/>
				</HTNPlanDoneActivity>
				<IfThenElse ResetWhenReinstalled="true" Comment="Despawn minions on death or leash">
					<IfCondition>
						<IfMannequinTag TagName="HasSummonedMinion"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<AIAssignOrder>
								<Default Order="Despawn"/>
							</AIAssignOrder>
							<SetMannequinTag ResetWhenReinstalled="true">
								<Default TagName="HasSummonedMinion" OnEnter="Unset" OnExit="Unset" DelayTimer="0.2"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
					<ElseActivity/>
				</IfThenElse>
				<ClearStimuli>
					<Default TriggerOption="OnEnter" DelayTime="0.0"/>
				</ClearStimuli>
				<ClearBlackboardFact>
					<Default>
						<FactsToRemoveOnEnterss>
							<FactName FactName="Is_Communication_In_Progress"/>
							<FactName FactName="Completed_Communication_Count"/>
							<FactName FactName="Communicator_ID"/>
							<FactName FactName="Cached_Communicator_ID"/>
							<FactName FactName="Is_Transmitter_Main_Action_Completed"/>
							<FactName FactName="Is_Receiver_Main_Action_Completed"/>
							<FactName FactName="Notified_Transmitter_Of_Completion"/>
						</FactsToRemoveOnEnterss>
					</Default>
				</ClearBlackboardFact>
				<ClearDynamicTags>
					<Default TriggerOption="OnEnter"/>
				</ClearDynamicTags>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="ResetAI"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="ResetAI"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
				<SetMannequinTag ResetWhenReinstalled="true">
					<Default TagName="Alerted" OnEnter="Unset" OnExit="NoEffect" DelayTimer="0.0"/>
				</SetMannequinTag>
			</Activities>
		</Action>
	</Actions>
	<Conditions/>
</ActionList>

