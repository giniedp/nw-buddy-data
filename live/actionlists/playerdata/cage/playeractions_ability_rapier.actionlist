<ActionList>
	<Actions>
		<Action Name="Ability_Rapier_Slash" FragmentName="Ability_Rapier_Slash" Predictive="true">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Slash"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Slash" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Rapier_Slash" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Rapier"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
					<IfMannequinMarker MarkerName="AnimEnd"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<IfThenElse Comment="Apply Rapier_BonusDMGAfterAbility status effect if unlocked">
					<IfCondition>
						<IfAbilityActive AbilityName="Rapier_BonusDMGAfterAbility"/>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Rapier_BonusDMGAfterAbility"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Rapier_Slash" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Rapier_Slash" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Rapier_Slash"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="When to start tracking the action">
					<IfCondition>
						<IfMannequinMarker MarkerName="TrackAction"/>
					</IfCondition>
					<ThenActivity>
						<TrackTimeInAction>
							<Default/>
						</TrackTimeInAction>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default Decel="7,7,7"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="20,20,20" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Scale_Translation" MotionMultiplier="1.0" Decel="15.00,15.00,15.00" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
				<ClearAbilityHits>
					<Default AbilityName="PassiveRapier02" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<ClearAbilityHits>
					<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Flurry" FragmentName="Ability_Rapier_Flurry" Predictive="true">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Flurry"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Flurry" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Rapier_Flurry" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Rapier"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<IfThenElse Comment="Apply Rapier_BonusDMGAfterAbility status effect if unlocked">
					<IfCondition>
						<IfAbilityActive AbilityName="Rapier_BonusDMGAfterAbility"/>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Rapier_BonusDMGAfterAbility"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Rapier_Flurry" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="0.4" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Rapier_Flurry" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Rapier_Flurry"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
				<IfThenElse Comment="Clear Hit count for Rapier CDR">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="ResetHits"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ClearAbilityHits>
								<Default AbilityName="PassiveRapier02" OnEnter="Enable" OnExit="Enable"/>
							</ClearAbilityHits>
							<ClearAbilityHits>
								<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="Enable" OnExit="Enable"/>
							</ClearAbilityHits>
						</Group>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Flourish" FragmentName="Ability_Rapier_Flourish">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Flourish"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Flourish" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Rapier_Flourish" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Rapier"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Apply Rapier_BonusDMGAfterAbility status effect if unlocked">
					<IfCondition>
						<IfAbilityActive AbilityName="Rapier_BonusDMGAfterAbility"/>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Rapier_BonusDMGAfterAbility"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Rapier_Flourish" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Rapier_Flourish" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Rapier_Flourish"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="0.7" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="0.7" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="30,30,30" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation" MotionMultiplier="1.3" Decel="10,10,10" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<ClearAbilityHits>
					<Default AbilityName="PassiveRapier02" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<ClearAbilityHits>
					<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Finish" FragmentName="Ability_Rapier_Finish">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="1.0" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="2.6" RotationMultiplier="0.00" Decel="30,30,30" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation" MotionMultiplier="2.9" Decel="10,10,10" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="2.6" RotationMultiplier="0.00" Decel="30,30,30" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<PerformActiveAbility>
					<Default AbilityName="Ability_Rapier_Finish"/>
				</PerformActiveAbility>
				<ClearAbilityHits>
					<Default AbilityName="PassiveRapier02" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<ClearAbilityHits>
					<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Finish_Ultimate" FragmentName="Ability_Rapier_Finish_Ultimate">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="1.0" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="2.6" RotationMultiplier="0.00" Decel="30,30,30" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation" MotionMultiplier="2.9" Decel="10,10,10" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="2.6" RotationMultiplier="0.00" Decel="30,30,30" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<PerformActiveAbility>
					<Default AbilityName="Ability_Rapier_Finish_Ultimate"/>
				</PerformActiveAbility>
				<ClearAbilityHits>
					<Default AbilityName="PassiveRapier02" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<ClearAbilityHits>
					<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Riposte" FragmentName="Ability_Rapier_Riposte_Loop">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Riposte"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Riposte" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Rapier_Riposte" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Rapier"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<IfThenElse Comment="Apply Rapier_BonusDMGAfterAbility status effect if unlocked">
					<IfCondition>
						<IfAbilityActive AbilityName="Rapier_BonusDMGAfterAbility"/>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Rapier_BonusDMGAfterAbility"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Rapier_Riposte" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Rapier_Riposte" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Rapier_Riposte"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="0.5" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="0.5" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Rapier_Riposte_Timer"/>
						</EffectsToApplyOnEnter>
					</Default>
				</ModifyStatusEffects>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter/>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="Rapier_Riposte_Timer"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="0.001" RotationMultiplier="0.0" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation" MotionMultiplier="0.001" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="0.001" RotationMultiplier="0.0" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Riposte_Out" FragmentName="Ability_Rapier_Riposte_Out" ServerStarted="true">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<TrackTimeInAction>
					<Default OnEnter="Enable" OnExit="Enable"/>
				</TrackTimeInAction>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyCameraRelativeRotation" TurnRate="0.35" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyInputRelativeRotation" TurnRate="350.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Rapier_Riposte_Uninterruptible_Riposte"/>
						</EffectsToApplyOnEnter>
					</Default>
				</ModifyStatusEffects>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter/>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="Rapier_Riposte_Timer"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter/>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="LifeStaff_DamageEnemy_Armor_Siphon"/>
							<EffectId EffectId="LifeStaff_DamageEnemy_Siphon"/>
							<EffectId EffectId="LifeStaff_DamageEnemy_Super_Siphon"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
				<PerformActiveAbility>
					<Default AbilityName="Ability_Rapier_Riposte_Out"/>
				</PerformActiveAbility>
				<ClearAbilityHits>
					<Default AbilityName="PassiveRapier02" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<ClearAbilityHits>
					<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Evasion" FragmentName="Ability_Rapier_Evasion">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Evasion"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Evasion" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Rapier_Evasion" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" CheckAllSlots="true"/>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Has_Valid_Current_Offhand"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Rapier"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<IfThenElse ResetWhenReinstalled="false" Comment="Only do actual ability stuff if cooldown wasn't already active (this can happen with server corrections">
					<IfCondition>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Rapier_Evasion" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" CheckAllSlots="true"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<IfThenElse Comment="Apply Rapier_BonusDMGAfterAbility status effect if unlocked">
								<IfCondition>
									<IfAbilityActive AbilityName="Rapier_BonusDMGAfterAbility"/>
								</IfCondition>
								<ThenActivity>
									<ModifyStatusEffects>
										<Default>
											<EffectsToApplyOnEnter>
												<EffectId EffectId="Rapier_BonusDMGAfterAbility"/>
											</EffectsToApplyOnEnter>
										</Default>
									</ModifyStatusEffects>
								</ThenActivity>
							</IfThenElse>
							<ModifyStatusEffects>
								<Default>
									<EffectsToRemoveOnEnter>
										<EffectId EffectId="PotionHaste"/>
									</EffectsToRemoveOnEnter>
								</Default>
							</ModifyStatusEffects>
							<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
								<IfCondition>
									<IfMannequinTag TagName="Stand"/>
								</IfCondition>
								<ThenActivity>
									<Group>
										<SetMannequinTag ResetWhenReinstalled="false">
											<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
										</SetMannequinTag>
									</Group>
								</ThenActivity>
							</IfThenElse>
							<ClearInput>
								<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<ClearInput>
								<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
								<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
							</ClearInput>
							<BlockEnteringStore/>
							<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
								<IfCondition>
									<Not>
										<IfExternalCondition ConditionName="IsMelee"/>
									</Not>
								</IfCondition>
								<ThenActivity>
									<ModifyStatusEffects>
										<Default>
											<EffectsToApplyOnEnter>
												<EffectId EffectId="Sprint_Delay_Timer"/>
											</EffectsToApplyOnEnter>
										</Default>
									</ModifyStatusEffects>
								</ThenActivity>
							</IfThenElse>
							<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
								<IfCondition>
									<And>
										<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
										<IfExternalCondition ConditionName="IsMelee"/>
									</And>
								</IfCondition>
								<ThenActivity>
									<ModifyStatusEffects>
										<Default>
											<EffectsToApplyOnEnter>
												<EffectId EffectId="Attack_Regen_Bonus"/>
											</EffectsToApplyOnEnter>
											<EffectsToRemoveOnExit>
												<EffectId EffectId="Attack_Regen_Bonus"/>
											</EffectsToRemoveOnExit>
										</Default>
									</ModifyStatusEffects>
								</ThenActivity>
							</IfThenElse>
							<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
								<IfCondition>
									<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
								</IfCondition>
								<ThenActivity>
									<Group>
										<SheatheWeapon ResetWhenReinstalled="false">
											<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
										</SheatheWeapon>
										<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
											<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
										</SetMannequinTagFromSource>
										<SetMannequinTag ResetWhenReinstalled="false">
											<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
										</SetMannequinTag>
										<ChangeActionFragment ResetWhenReinstalled="false">
											<Default UseDefaultFragment="true"/>
										</ChangeActionFragment>
									</Group>
								</ThenActivity>
							</IfThenElse>
							<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
								<IfCondition>
									<Or>
										<IfMannequinTag TagName="Crouch"/>
										<IfMannequinTag TagName="Prone"/>
									</Or>
								</IfCondition>
								<ThenActivity>
									<Group>
										<SetMannequinTag ResetWhenReinstalled="false">
											<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
										</SetMannequinTag>
										<SetMannequinTag ResetWhenReinstalled="false">
											<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
										</SetMannequinTag>
									</Group>
								</ThenActivity>
							</IfThenElse>
							<ClearActiveAbilityMoveInput>
								<Default AbilityName="Ability_Rapier_Evasion" OnEnter="Clear" OnExit="NoEffect"/>
							</ClearActiveAbilityMoveInput>
							<TrackTimeInAction>
								<Default OnEnter="Enable" OnExit="Enable"/>
							</TrackTimeInAction>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Rapier_Evasion" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Rapier_Evasion"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearMannequinTagGroup ResetWhenReinstalled="false">
					<Default TagGroupName="NavDirection" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearMannequinTagGroup>
				<SetMannequinTag Comment="Set Nav Direction" ResetWhenReinstalled="true">
					<Default TagName="ForwardNav" OnEnter="Set" OnExit="NoEffect"/>
					<Conditional Name="Evade_Back" TagName="BackNav" OnEnter="Set" OnExit="NoEffect"/>
					<Conditional Name="Evade_Left" TagName="LeftNav" OnEnter="Set" OnExit="NoEffect"/>
					<Conditional Name="Evade_Right" TagName="RightNav" OnEnter="Set" OnExit="NoEffect"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.5" RotationMultiplier="0.00" Decel="0.0,0.0,0.0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Evade_Back" MotionMultiplier="2.3" RotationMultiplier="0.00" Decel="0.0,0.0,0.0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Evade_Left" MotionMultiplier="1.7" RotationMultiplier="0.00" Decel="0.0,0.0,0.0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Evade_Right" MotionMultiplier="1.7" RotationMultiplier="0.00" Decel="0.0,0.0,0.0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter/>
					</Default>
					<Conditional Name="Evade_Forward_Mod">
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Rapier_Evade_Forward_Damage"/>
						</EffectsToApplyOnEnter>
					</Conditional>
					<Conditional Name="Global_Weapon_Evade_Perk">
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Rapier_Evade_Forward_Damage"/>
						</EffectsToApplyOnEnter>
					</Conditional>
				</ModifyStatusEffects>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="DisableAim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyCameraRelativeRotation" TurnRate="0.8" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default/>
							<Conditional Name="ApplyCameraRelativeRotation" TurnRate="0.8" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="ContinueAutoRun" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Melee_Attack"/>
				</AIAudioTriggerActivity>
				<ResetGrit ResetWhenReinstalled="false">
					<Default OnEnter="Reset" OnExit="NoEffect"/>
				</ResetGrit>
				<ClearMannequinTagGroup ResetWhenReinstalled="false">
					<Default TagGroupName="NavDirection" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearMannequinTagGroup>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter/>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="Rapier_Riposte_Timer"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter/>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="Rapier_Riposte_Uninterruptible_Riposte"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Evade_Attack" FragmentName="Ability_Rapier_Evade_Attack">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="1.0" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<ClearAbilityHits>
					<Default AbilityName="PassiveRapier02" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<ClearAbilityHits>
					<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Aerial_Lunge_Intro" FragmentName="Ability_Rapier_Aerial_Lunge_Intro">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Aerial_Lunge_Intro"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Aerial_Lunge_Intro" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Rapier_Aerial_Lunge_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or Comment="Weapon Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Rapier"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0"/>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Rapier_Aerial_Lunge_Intro" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="ContinueAutoRun" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Apply Rapier_BonusDMGAfterAbility status effect if unlocked">
					<IfCondition>
						<IfAbilityActive AbilityName="Rapier_BonusDMGAfterAbility"/>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Rapier_BonusDMGAfterAbility"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Rapier_Aerial_Lunge_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Rapier_Aerial_Lunge_Intro"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="9,9,9" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
					<Conditional Name="Attack_Translation" MotionMultiplier="1.3" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="1.0" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="1.0" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<DisableCollision>
					<Default disableActorToActorCollision="true" disableTerrainCollision="false" disablePlayerToPlayerCollision="true"/>
				</DisableCollision>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Aerial_Lunge_Loop" FragmentName="Ability_Rapier_Aerial_Lunge_Loop">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0"/>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="ContinueAutoRun" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate=".3" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate=".3" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="0.8" RotationMultiplier="0.00" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="Attack_Translation" MotionMultiplier="0.8" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="0.8" RotationMultiplier="0.00" Decel="0,0,0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<ModifyGravity>
					<Default scale="3"/>
				</ModifyGravity>
				<ClearAbilityHits>
					<Default AbilityName="PassiveRapier02" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<ClearAbilityHits>
					<Default AbilityName="Rapier_BonusCDOnCrit" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
				<DisableCollision>
					<Default disableActorToActorCollision="true" disableTerrainCollision="false" disablePlayerToPlayerCollision="true"/>
				</DisableCollision>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Aerial_Lunge_Stop" FragmentName="Ability_Rapier_Aerial_Lunge_Stop">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0"/>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="ContinueAutoRun" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<CharacterRelativeMovement>
					<Default ForwardInput="" BackwardInput="moveback" LeftInput="" RightInput="" UpInput="" DownInput="" Forced="true" AlignVelocity="true" Speed="0.0,5.0,0.0" Accel="0.0,0.0,0.0" Decel="0,50,0" AnalogInputOverride="None" UseAnalogInputToModulateSpeed="false" MinSpeed="0.0,0.0,0.0" MinAnalogInputMag="0.1" MaxAnalogInputMag="1.0" InheritVelocity="false"/>
				</CharacterRelativeMovement>
				<DisableCollision>
					<Default disableActorToActorCollision="true" disableTerrainCollision="false" disablePlayerToPlayerCollision="true"/>
				</DisableCollision>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Rapier_Fleche_Backstab"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnEnter/>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Aerial_Lunge_Stop_Instant_Wake" FragmentName="Ability_Rapier_Aerial_Lunge_Stop_Instant_Wake">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<CharacterRelativeMovement>
					<Default ForwardInput="" BackwardInput="moveback" LeftInput="" RightInput="" UpInput="" DownInput="" Forced="true" AlignVelocity="true" Speed="0.0,5.0,0.0" Accel="0.0,0.0,0.0" Decel="0,50,0" AnalogInputOverride="None" UseAnalogInputToModulateSpeed="false" MinSpeed="0.0,0.0,0.0" MinAnalogInputMag="0.1" MaxAnalogInputMag="1.0" InheritVelocity="false"/>
				</CharacterRelativeMovement>
				<DisableCollision>
					<Default disableActorToActorCollision="true" disableTerrainCollision="false" disablePlayerToPlayerCollision="true"/>
				</DisableCollision>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Rapier_Fleche_Backstab"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnEnter/>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="Ability_Rapier_Wake" FragmentName="Ability_Rapier_Wake">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="15,15,15" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotationDuringCameraLock_1H_Rapier" TurnRate="1.0" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="1H_Rapier_ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Rapier_Momentum_Active" Comment="Cleans up buff applied by ultimate when weapon is sheathed.">
			<ActivationCondition>
				<And>
					<IfHasStatusEffect StatusEffect="Rapier_BonusDMGAfterAbility"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfHasStatusEffect StatusEffect="Rapier_BonusDMGAfterAbility"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="Rapier"/>
					</Not>
					<Not>
						<IfAbilityActive AbilityName="Rapier_BonusDMGAfterAbility"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="Rapier_BonusDMGAfterAbility"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
	</Actions>
	<Conditions>
		<And Name="TrueCondition">
			<True/>
		</And>
		<And Name="ApplyRotationDuringCameraLock_1H_Rapier">
			<IfMannequinMarker MarkerName="ApplyRotationDuringCameraLock"/>
			<IfMannequinTag TagName="1H_Melee"/>
			<Or>
				<IfCameraLockActive/>
				<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
				<IfMannequinMarker MarkerName="ForceCameraFacing"/>
				<IfMannequinTag TagName="1H_Melee"/>
			</Or>
		</And>
		<And Name="1H_Rapier_ApplyRotation">
			<IfMannequinTag TagName="1H_Melee"/>
			<IfMannequinMarker MarkerName="ApplyRotation"/>
			<Not>
				<IfCameraLockActive/>
			</Not>
		</And>
		<And Name="Evade_Left">
			<Or>
				<IfCameraLockActive/>
				<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
				<IfMannequinMarker MarkerName="ForceCameraFacing"/>
			</Or>
			<Or>
				<IfAnalogInput AnalogInput="LeftAnalog" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="270.0" TargetAngleTolerance="45.0"/>
				<IfAnalogInput AnalogInput="None" DigitalForwardInput="ForwardNav" DigitalBackInput="moveback" DigitalRightInput="moveright" DigitalLeftInput="moveleft" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="270.0" TargetAngleTolerance="45.0"/>
			</Or>
		</And>
		<And Name="Evade_Back">
			<Or>
				<IfCameraLockActive/>
				<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
				<IfMannequinMarker MarkerName="ForceCameraFacing"/>
			</Or>
			<Or>
				<IfAnalogInput AnalogInput="LeftAnalog" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="180.0" TargetAngleTolerance="50.0"/>
				<IfAnalogInput AnalogInput="None" DigitalForwardInput="ForwardNav" DigitalBackInput="moveback" DigitalRightInput="moveright" DigitalLeftInput="moveleft" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="180.0" TargetAngleTolerance="50.0"/>
			</Or>
		</And>
		<And Name="Evade_Right">
			<Or>
				<IfCameraLockActive/>
				<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
				<IfMannequinMarker MarkerName="ForceCameraFacing"/>
			</Or>
			<Or>
				<IfAnalogInput AnalogInput="LeftAnalog" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="90.0" TargetAngleTolerance="45.0"/>
				<IfAnalogInput AnalogInput="None" DigitalForwardInput="ForwardNav" DigitalBackInput="moveback" DigitalRightInput="moveright" DigitalLeftInput="moveleft" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="90.0" TargetAngleTolerance="45.0"/>
			</Or>
		</And>
		<Or Name="Evade_Forward">
			<IfAnalogInput AnalogInput="LeftAnalog" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngleTolerance="50.0"/>
			<IfAnalogInput AnalogInput="None" DigitalForwardInput="ForwardNav" DigitalBackInput="moveback" DigitalRightInput="moveright" DigitalLeftInput="moveleft" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngleTolerance="50.0"/>
		</Or>
		<Or Name="Evade_Forward_Mod">
			<And>
				<IfAbilityActive AbilityName="Rapier_Evasion_Mod3"/>
				<Not>
					<Or>
						<IfAnalogInput AnalogInput="LeftAnalog" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="270.0" TargetAngleTolerance="45.0"/>
						<IfAnalogInput AnalogInput="None" DigitalForwardInput="ForwardNav" DigitalBackInput="moveback" DigitalRightInput="moveright" DigitalLeftInput="moveleft" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="270.0" TargetAngleTolerance="45.0"/>
					</Or>
				</Not>
				<Not>
					<Or>
						<IfAnalogInput AnalogInput="LeftAnalog" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="180.0" TargetAngleTolerance="50.0"/>
						<IfAnalogInput AnalogInput="None" DigitalForwardInput="ForwardNav" DigitalBackInput="moveback" DigitalRightInput="moveright" DigitalLeftInput="moveleft" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="180.0" TargetAngleTolerance="50.0"/>
					</Or>
				</Not>
				<Not>
					<Or>
						<IfAnalogInput AnalogInput="LeftAnalog" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="90.0" TargetAngleTolerance="45.0"/>
						<IfAnalogInput AnalogInput="None" DigitalForwardInput="ForwardNav" DigitalBackInput="moveback" DigitalRightInput="moveright" DigitalLeftInput="moveleft" MinInputMagnitude="0.20" RequireTargetAngleMatch="true" TargetAngle="90.0" TargetAngleTolerance="45.0"/>
					</Or>
				</Not>
			</And>
		</Or>
		<Or Name="Global_Weapon_Evade_Perk">
			<And>
				<IfAbilityActive AbilityName="Rapier_Evasion_Mod3"/>
				<IfAbilityActive External="true" AbilityName="GlobalPerk_Ability_Rapier_Evade"/>
			</And>
		</Or>
		<And Name="CanAttack_Primary_Rapier">
			<IfInput InputName="attack_primary"/>
		</And>
		<And Name="CanAttack_Slash">
			<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Slash"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Rapier_Slash" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Flourish">
			<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Flourish"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Rapier_Flourish" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Flurry">
			<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Flurry"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Rapier_Flurry" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Riposte">
			<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Riposte"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Rapier_Riposte" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Evasion">
			<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Evasion"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Rapier_Evasion" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Aerial_Lunge">
			<IfActiveAbilityMoveName AbilityName="Ability_Rapier_Aerial_Lunge_Intro"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Rapier_Aerial_Lunge_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Wake">
			<IfInput InputName="attack_primary"/>
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod2"/>
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod3"/>
		</And>
		<And Name="RapierHitDetected">
			<IfDamagedByPowerLevel Comparison="GreaterThanOrEqual" Value="0" FailOnNoReactionDamage="false"/>
			<IfMannequinTag TagName="Rapier"/>
			<IfHasStatusEffect StatusEffect="Rapier_Riposte_Timer"/>
		</And>
		<And Name="Rapier_Mod1">
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod1"/>
		</And>
		<And Name="RapierHitDetected_Mod1">
			<IfDamagedByPowerLevel Comparison="GreaterThanOrEqual" Value="0" FailOnNoReactionDamage="false"/>
			<IfMannequinTag TagName="Rapier"/>
			<IfHasStatusEffect StatusEffect="Rapier_Riposte_Timer"/>
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod1"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Riposte_Mod2"/>
			</Not>
		</And>
		<And Name="RapierHitDetected_Mod2">
			<IfDamagedByPowerLevel Comparison="GreaterThanOrEqual" Value="0" FailOnNoReactionDamage="false"/>
			<IfMannequinTag TagName="Rapier"/>
			<IfHasStatusEffect StatusEffect="Rapier_Riposte_Timer"/>
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod2"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Riposte_Mod3"/>
			</Not>
		</And>
		<And Name="RapierHitDetected_Mod3">
			<IfDamagedByPowerLevel Comparison="GreaterThanOrEqual" Value="0" FailOnNoReactionDamage="false"/>
			<IfMannequinTag TagName="Rapier"/>
			<IfHasStatusEffect StatusEffect="Rapier_Riposte_Timer"/>
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod2"/>
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod3"/>
		</And>
		<And Name="Rapier_Mod3">
			<IfAbilityActive AbilityName="Rapier_Riposte_Mod3"/>
		</And>
		<And Name="Rapier_Mod3_Not">
			<Not>
				<IfAbilityActive AbilityName="Rapier_Riposte_Mod3"/>
			</Not>
		</And>
		<And Name="No_Slash_Upgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Slash_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Slash_Mod2"/>
				</Or>
			</Not>
		</And>
		<And Name="Slash_Mod1_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Slash_Mod1"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Slash_Mod2"/>
			</Not>
		</And>
		<And Name="Slash_Mod2_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Slash_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Slash_Mod2"/>
		</And>
		<And Name="No_Flurry_Upgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Flurry_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Flurry_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Flurry_Mod3"/>
				</Or>
			</Not>
		</And>
		<And Name="Flurry_Mod1_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Flurry_Mod1"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Flurry_Mod2"/>
			</Not>
		</And>
		<And Name="Flurry_Mod2_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Flurry_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Flurry_Mod2"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Flurry_Mod3"/>
			</Not>
		</And>
		<And Name="Flurry_Mod3_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Flurry_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Flurry_Mod2"/>
			<IfAbilityActive AbilityName="Rapier_Flurry_Mod3"/>
		</And>
		<And Name="Flurry_Mod4_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Flurry_Mod4"/>
		</And>
		<And Name="Flurry_Mod4_Upgrade_Not">
			<Not>
				<IfAbilityActive AbilityName="Rapier_Flurry_Mod4"/>
			</Not>
		</And>
		<And Name="No_Flourish_Upgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod3"/>
				</Or>
			</Not>
		</And>
		<And Name="Flourish_Mod1_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod1"/>
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod3"/>
				</Or>
			</Not>
		</And>
		<And Name="Flourish_Mod2_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod2"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Flourish_Mod3"/>
			</Not>
		</And>
		<And Name="Flourish_Mod3_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod2"/>
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod3"/>
		</And>
		<And Name="Flourish_Finish_Grit">
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod1"/>
		</And>
		<And Name="CanAttack_Finish">
			<IfAbilityActive AbilityName="Ability_Rapier_Flourish"/>
			<IfInput InputName="attack_primary"/>
			<Not>
				<And>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod3"/>
					<IfAbilityActive AbilityName="Rapier_Flourish_Mod4"/>
				</And>
			</Not>
		</And>
		<And Name="CanAttack_Finish_Ultimate">
			<IfAbilityActive AbilityName="Ability_Rapier_Flourish"/>
			<IfInput InputName="attack_primary"/>
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod2"/>
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod3"/>
			<IfAbilityActive AbilityName="Rapier_Flourish_Mod4"/>
		</And>
		<And Name="No_Lunge_Upgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Lunge_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Lunge_Mod2"/>
				</Or>
			</Not>
		</And>
		<And Name="Lunge_Mod1_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Lunge_Mod1"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Lunge_Mod2"/>
			</Not>
		</And>
		<And Name="Lunge_Mod2_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Lunge_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Lunge_Mod2"/>
		</And>
		<And Name="No_Evasion_Upgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Evasion_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Evasion_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Evasion_Mod3"/>
				</Or>
			</Not>
		</And>
		<And Name="Evasion_Mod1_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Evasion_Mod1"/>
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Evasion_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Evasion_Mod3"/>
				</Or>
			</Not>
		</And>
		<And Name="Evasion_Mod2_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Evasion_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Evasion_Mod2"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Evasion_Mod3"/>
			</Not>
		</And>
		<And Name="Evasion_Mod3_Upgrade">
			<Or>
				<IfAbilityActive AbilityName="Rapier_Evasion_Mod1"/>
				<IfAbilityActive AbilityName="Rapier_Evasion_Mod2"/>
				<IfAbilityActive AbilityName="Rapier_Evasion_Mod3"/>
			</Or>
		</And>
		<And Name="No_Evasion02_Upgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Evasion02_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Evasion02_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Evasion02_Mod3"/>
				</Or>
			</Not>
		</And>
		<And Name="Evasion02_Mod1_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Evasion02_Mod1"/>
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Evasion02_Mod2"/>
					<IfAbilityActive AbilityName="Rapier_Evasion02_Mod3"/>
				</Or>
			</Not>
		</And>
		<And Name="Evasion02_Mod2_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Evasion02_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Evasion02_Mod2"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Evasion02_Mod3"/>
			</Not>
		</And>
		<And Name="Evasion02_Mod3_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Evasion02_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Evasion02_Mod2"/>
			<IfAbilityActive AbilityName="Rapier_Evasion02_Mod3"/>
		</And>
		<And Name="No_Aerial_Lunge_Upgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod1"/>
					<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod2"/>
				</Or>
			</Not>
		</And>
		<And Name="Aerial_Lunge_Mod1_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod1"/>
			<Not>
				<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod2"/>
			</Not>
		</And>
		<And Name="Aerial_Lunge_Mod2_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod2"/>
		</And>
		<And Name="Aerial_Lunge_Mod3_Upgrade">
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod1"/>
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod2"/>
			<IfAbilityActive AbilityName="Rapier_Aerial_Lunge_Mod3"/>
		</And>
		<And Name="TriggerFinish">
			<IfAbilityActive AbilityName="Ability_Spear_Sweep_FollowupAttack"/>
			<IfInput InputName="attack_primary"/>
		</And>
		<And Name="Riposte_Attack">
			<IfDamagedByPowerLevel Comparison="GreaterThanOrEqual" Value="0" FailOnNoReactionDamage="true"/>
			<IfMannequinTag TagName="Rapier"/>
			<IfHasStatusEffect StatusEffect="Rapier_Riposte_Timer"/>
		</And>
	</Conditions>
</ActionList>

