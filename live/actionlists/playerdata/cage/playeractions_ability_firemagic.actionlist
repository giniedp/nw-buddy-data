<ActionList>
	<Actions>
		<Action Name="Fire_Staff_Cast_Primary" FragmentName="Magic_Staff_Cast_Primary_C1">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" FragmentName="" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast light attack Projectile">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastFireProjectile"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Elemental_Fire_Projectile"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<CameraRelativeFacing>
					<Default TurnRate="0.0" UseExponentialTurnRate="false" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCamera" TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCameraFast" TurnRate="0.90" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
				</CameraRelativeFacing>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Unset AttackAction on CanTransition" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Fire_Staff_Cast_Heavy" FragmentName="Magic_Staff_Cast_Primary_C2">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<CameraRelativeFacing>
					<Default TurnRate="0.0" UseExponentialTurnRate="false" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCamera" TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCameraFast" TurnRate="0.90" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
				</CameraRelativeFacing>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Unset AttackAction on CanTransition" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check NORMAL HEAVY fire input">
					<IfCondition>
						<And>
							<Not>
								<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_ManaOnHit"/>
							</Not>
							<Not>
								<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_HeavyNoMana"/>
							</Not>
							<IfMannequinMarker MarkerName="CastFireProjectile"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_Heavy_Firestaff"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check MANA COST UPGRADE fire input">
					<IfCondition>
						<And>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_ManaOnHit"/>
							<Not>
								<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_HeavyNoMana"/>
							</Not>
							<IfMannequinMarker MarkerName="CastFireProjectile"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_Heavy_Firestaff_Upgrade"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check NORMAL PLUS SPLASH fire input">
					<IfCondition>
						<And>
							<Not>
								<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_ManaOnHit"/>
							</Not>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_HeavyNoMana"/>
							<IfMannequinMarker MarkerName="CastFireProjectile"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_Heavy_Firestaff_Splash"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check MANA COST UPGRADE PLUS SPLASH fire input">
					<IfCondition>
						<And>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_ManaOnHit"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_HeavyNoMana"/>
							<IfMannequinMarker MarkerName="CastFireProjectile"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_Heavy_Firestaff_Upgrade_Splash"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Pillar" FragmentName="Ability_Fire_Staff_Pillar">
			<ActivationCondition>
				<Or>
					<Not>
						<True/>
					</Not>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_PillarofFire"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_PillarofFire" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_PillarOfFire" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Firestaff_PillarofFire" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<Not>
							<IfMannequinMarker MarkerName="Magic_AimExit"/>
						</Not>
						<Not>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Fire_Staff_Pillar"/>
						</Not>
						<Not>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Fire_Staff_Pillar_Aim"/>
						</Not>
						<Not>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTag TagName="Fire"/>
						</Or>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
					</And>
				</Or>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfMannequinMarker MarkerName="Magic_AimExit"/>
					<IfMannequinTag TagName="Prone_Desired"/>
					<IfMannequinTag TagName="Prone"/>
					<IfMannequinTag TagName="Crouch"/>
					<IsSilenced/>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Firestaff_PillarofFire" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<SetToggleInput>
					<Default InputName="block" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<SetToggleInput>
					<Default InputName="aim_draw_press" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check PILLAR fire input">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Pillar_No_Upgrade"/>
							<Or>
								<IfInput InputName="attack_shoot"/>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_PillarofFire"/>
							</Or>
							<IfMannequinMarker MarkerName="Magic_IsReady_Pillar"/>
							<Not>
								<IfInput InputName="aim_draw_active_virtual"/>
							</Not>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellRaycast SpellName="FireStaff_PillarOfFire"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check PILLAR DMG fire input">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Pillar_DMG_Upgrade"/>
							<Or>
								<IfInput InputName="attack_shoot"/>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_PillarofFire"/>
							</Or>
							<IfMannequinMarker MarkerName="Magic_IsReady_Pillar"/>
							<IfMannequinTag TagName="Fire"/>
							<Not>
								<IfInput InputName="aim_draw_active_virtual"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellRaycast SpellName="FireStaff_PillarOfFire_DMG_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check PILLAR BUFF fire input">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Pillar_Mana_Upgrade"/>
							<Or>
								<IfInput InputName="attack_shoot"/>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_PillarofFire"/>
							</Or>
							<IfMannequinMarker MarkerName="Magic_IsReady_Pillar"/>
							<IfMannequinTag TagName="Fire"/>
							<Not>
								<IfInput InputName="aim_draw_active_virtual"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellRaycast SpellName="FireStaff_PillarOfFire_Mana_Gain_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Aim Tag">
					<IfCondition>
						<IfMannequinMarker MarkerName="UnsetAimTag"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="Aim" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
						</SetMannequinTag>
					</ThenActivity>
					<ElseActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="Aim" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
						</SetMannequinTag>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Pillar Targeting Indicator">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Pillar_No_Upgrade"/>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Pillar"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="FireStaff_PillarOfFire_DMG_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Pillar DMG Targeting Indicator">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Pillar_DMG_Upgrade"/>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Pillar"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="FireStaff_PillarOfFire_DMG_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Pillar MANA Targeting Indicator">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Pillar_Mana_Upgrade"/>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Pillar"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="FireStaff_PillarOfFire_Mana_Gain_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Camera Relative Facing Logic">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="TurnInPlaceDisabled"/>
							<Not>
								<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Sprint"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Pillar_Cast" FragmentName="Ability_Fire_Staff_Pillar_Cast">
			<ActivationCondition>
				<And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Firestaff_PillarofFire" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<And>
						<ActionConditionSpellSpawnLocationState Value="RaycastPassed"/>
						<IfMannequinMarker MarkerName="Magic_IsReadying_Pillar"/>
					</And>
					<IfMannequinTag TagName="MagicStaff"/>
					<And>
						<Not>
							<IfInput InputName="aim_draw_active_virtual"/>
						</Not>
						<IfMannequinTag TagName="Fire"/>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_PillarOfFire" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</And>
					<Not>
						<Or>
							<IsSilenced/>
							<IfFragmentPlaying UseHostActionFragment="true"/>
							<IfInput InputName="Placing_Building"/>
						</Or>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Firestaff_PillarofFire" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" CheckForFreeCooldown="true"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Firestaff_PillarofFire"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Pyro Haste">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_Pyro_Haste"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste"/>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Firemage Ult">
					<IfCondition>
						<And>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage_Timer"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default>
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Ultimate_Firemage_Timer"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
							<CastSpell>
								<Default SpellName="Spell_Ultimate_Firemage" TakeDurability="false"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<CameraRelativeFacing>
					<Default TurnRate="0.0" UseExponentialTurnRate="false" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCamera" TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCameraFast" TurnRate="0.90" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
				</CameraRelativeFacing>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<ClearAbilityHits>
					<Default AbilityName="GlobalPerk_Ability_FireStaff_PillarOfFire" OnEnter="Enable" OnExit="NoEffect"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Speed_Intro" FragmentName="Ability_Fire_Staff_Speed_Intro">
			<ActivationCondition>
				<Or>
					<Not>
						<True/>
					</Not>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_BurnOut"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_BurnOut" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Speed_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Firestaff_BurnOut" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTag TagName="Fire"/>
						</Or>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
					</And>
				</Or>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Firestaff_BurnOut" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="ContinueAutoRun" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Pyro Haste">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_Pyro_Haste"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste"/>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="AlignToCamera" TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
							<Conditional Name="AlignToCameraFast" TurnRate="0.90" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="AlignToCamera" TurnRate="0.40" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="AlignToCameraFast" TurnRate="0.90" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Speed_Loop" FragmentName="Ability_Fire_Staff_Speed_Loop">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="ContinueAutoRun" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableCollision>
					<Default disableActorToActorCollision="true" disableTerrainCollision="false" disablePlayerToPlayerCollision="true"/>
				</DisableCollision>
				<PerformActiveAbility>
					<Default AbilityName="Ability_Firestaff_BurnOut"/>
				</PerformActiveAbility>
				<SetCooldownTimer>
					<Default AbilityID="Ability_Firestaff_BurnOut" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" CheckForFreeCooldown="true" OnEnter="Enable" OnExit="NoEffect"/>
				</SetCooldownTimer>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.50" RotationMultiplier="0.00" Decel="100.0,100.0,100.0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<ModifyGravity>
					<Default scale="3"/>
				</ModifyGravity>
				<IfThenElse ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="AlignToCamera" TurnRate="0.10" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="AlignToCamera" TurnRate="0.10" UseExponentialTurnRate="true" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<ClearAbilityHits>
					<Default AbilityName="Upgrade_Firestaff_BurnOut_CDR" OnEnter="NoEffect" OnExit="Enable"/>
				</ClearAbilityHits>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Speed_Stop" FragmentName="Ability_Fire_Staff_Speed_Stop">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="ContinueAutoRun" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Firemage Ult">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage_Timer"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default>
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Ultimate_Firemage_Timer"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
							<CastSpell>
								<Default SpellName="Spell_Ultimate_Firemage" TakeDurability="false"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="1000.0,1000.0,1000.0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<SetHaltMotionOnCollision>
					<Default MaxAngleToHaltMotion="140.00"/>
				</SetHaltMotionOnCollision>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Storm" FragmentName="Ability_Fire_Staff_Storm">
			<ActivationCondition>
				<Or>
					<Not>
						<True/>
					</Not>
					<And>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Storm" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_MeteorShower"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_MeteorShower" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Firestaff_MeteorShower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<Not>
							<IfMannequinMarker MarkerName="Magic_AimExit"/>
						</Not>
						<Not>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Fire_Staff_Storm"/>
						</Not>
						<Not>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Fire_Staff_Storm_Aim"/>
						</Not>
						<Not>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
						</Not>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTag TagName="Fire"/>
						</Or>
					</And>
				</Or>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfMannequinMarker MarkerName="Magic_AimExit"/>
					<IfMannequinTag TagName="Prone_Desired"/>
					<IfMannequinTag TagName="Prone"/>
					<IfMannequinTag TagName="Crouch"/>
					<IsSilenced/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Firestaff_MeteorShower" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<SetToggleInput>
					<Default InputName="block" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<SetToggleInput>
					<Default InputName="aim_draw_press" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Firemage Ult">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
							<Or>
								<IfInput InputName="attack_shoot"/>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_MeteorShower"/>
							</Or>
							<IfMannequinMarker MarkerName="Magic_IsReady_Storm"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage_Timer"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default>
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Ultimate_Firemage_Timer"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
							<CastSpell>
								<Default SpellName="Spell_Ultimate_Firemage" TakeDurability="false"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check STORM normal input">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Condition_Upgrade_Firestaff_MeteorShower_Base"/>
							<And>
								<Or>
									<IfInput InputName="attack_shoot"/>
									<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_MeteorShower"/>
								</Or>
								<IfMannequinMarker MarkerName="Magic_IsReady_Storm"/>
								<IfMannequinTag TagName="Fire"/>
								<Not>
									<IfInput InputName="aim_draw_active_virtual"/>
								</Not>
							</And>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellRaycast SpellName="Spell_Ability_FireStaff_Storm"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Aim Tag">
					<IfCondition>
						<IfMannequinMarker MarkerName="UnsetAimTag"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="Aim" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
						</SetMannequinTag>
					</ThenActivity>
					<ElseActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="Aim" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
						</SetMannequinTag>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Storm normal Targeting Indicator">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Condition_Upgrade_Firestaff_MeteorShower_Base"/>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Storm"/>
							<IfMannequinTag TagName="Fire"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="Spell_Ability_FireStaff_Storm"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Camera Relative Facing Logic">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="TurnInPlaceDisabled"/>
							<Not>
								<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Sprint"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Storm_Loop" FragmentName="Ability_Fire_Staff_Storm_Loop">
			<ActivationCondition>
				<And>
					<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Fire_Staff_Storm_Aim"/>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Storm" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Firestaff_MeteorShower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<And>
						<ActionConditionSpellSpawnLocationState Value="RaycastPassed"/>
						<IfMannequinMarker MarkerName="Magic_IsReadying_Storm"/>
					</And>
					<Not>
						<IfInput InputName="aim_draw_active_virtual"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default OnEnter="Enable" OnExit="Enable"/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Firestaff_MeteorShower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" CheckForFreeCooldown="true"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Firestaff_MeteorShower"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Pyro Haste">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_Pyro_Haste"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste"/>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<ChannelSpell SpellName="Spell_Ability_FireStaff_Storm_Channel"/>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Storm_Outro_Success" FragmentName="Ability_Fire_Staff_Storm_Outro">
			<ActivationCondition>
				<And>
					<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Fire_Staff_Storm_Loop" FragmentTime="6.0"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default/>
				</TrackTimeInAction>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Storm_Outro_Interrupted" FragmentName="Ability_Fire_Staff_Storm_Outro">
			<ActivationCondition>
				<And>
					<Or>
						<IfExternalCondition ConditionName="Magic_Channel_Interrupted"/>
						<IsSilenced/>
					</Or>
					<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Fire_Staff_Storm_Loop"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_FlameThrower" FragmentName="Ability_Fire_Staff_FlameThrower">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_FlameThrower"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_FlameThrower" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_FlameThrower_Cancel" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Firestaff_FlameThrower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Fire"/>
					</Or>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
					<IfMannequinMarker MarkerName="Magic_AimExit"/>
					<IsSilenced/>
					<IfItemSheathed SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Firestaff_FlameThrower" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<SetToggleInput>
					<Default InputName="block" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<SetToggleInput>
					<Default InputName="aim_draw_press" OnEnter="ToggleOff" OnExit="NoEffect"/>
				</SetToggleInput>
				<TrackTimeInAction>
					<Default OnEnter="Enable" OnExit="Enable"/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Pyro Haste">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_Pyro_Haste"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste"/>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Ult">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage_Timer"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default>
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Ultimate_Firemage_Timer"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
							<CastSpell>
								<Default SpellName="Spell_Ultimate_Firemage" TakeDurability="false"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ChannelSpell SpellName="FireStaff_FlameThrower"/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<And>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
							<Not>
								<IfAbilityActive AbilityName="Upgrade_Firestaff_FlameThrower_NoCooldown"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<SetCooldownTimer>
							<Default AbilityID="Ability_Firestaff_FlameThrower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" OnEnter="NoEffect" OnExit="Enable"/>
						</SetCooldownTimer>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Perform Ability after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<PerformActiveAbility>
							<Default AbilityName="Ability_Firestaff_FlameThrower"/>
						</PerformActiveAbility>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="BlockDisabled" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Aim Tag">
					<IfCondition>
						<IfMannequinMarker MarkerName="UnsetAimTag"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="HeavyAim" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
						</SetMannequinTag>
					</ThenActivity>
					<ElseActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="HeavyAim" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
						</SetMannequinTag>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Camera Relative Facing Logic">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="TurnInPlaceDisabled"/>
							<Not>
								<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Sprint"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="10.0,10.0,10.0" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Incinerate_Intro" FragmentName="Ability_Fire_Staff_Incinerate_Intro">
			<ActivationCondition>
				<Or>
					<And>
						<Not>
							<IfCooldownTimer AbilityID="Ability_Firestaff_Incinerate" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_Incinerate"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_Incinerate" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Incinerate" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<Or Comment="Stance Check">
							<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
							<IfMannequinTag TagName="Fire"/>
						</Or>
						<Not>
							<Or>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
								</And>
								<And>
									<Not>
										<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
									</Not>
									<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
								</And>
								<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
								<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
							</Or>
						</Not>
						<Not>
							<IfExternalCondition ConditionName="Throwable_Equipped"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="FishingPole"/>
						</Not>
						<Not>
							<IfInput InputName="Placing_Building"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="AttackAction"/>
						</Not>
						<Not>
							<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</Not>
						<IfCanResizeCharacterController ResizeType="Default"/>
						<Not>
							<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
						</Not>
						<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
						<Not>
							<HeightToGround ActivationHeight="0.5"/>
						</Not>
						<Not>
							<IfEncumbered/>
						</Not>
						<Not>
							<IsSilenced/>
						</Not>
						<Not>
							<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
						</Not>
						<Not>
							<IsMounted/>
						</Not>
					</And>
				</Or>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Firestaff_Incinerate" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Ult">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage_Timer"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default>
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Ultimate_Firemage_Timer"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
							<CastSpell>
								<Default SpellName="Spell_Ultimate_Firemage" TakeDurability="false"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Fire_Staff_Incinerate_Loop" FragmentName="Ability_Fire_Staff_Incinerate_Loop">
			<ActivationCondition>
				<Not Comment="Only Activate through TransitionInstant">
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Firestaff_Incinerate" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" CheckForFreeCooldown="true"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Firestaff_Incinerate"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing" PlayerSettingNameForGamepad="AttackFacing_Alternate"/>
							<IfMannequinMarker MarkerName="ForceCameraFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Pyro Haste">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_Pyro_Haste"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste"/>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="Disable AttackAction on CanTransition">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default OnEnter="Enable" OnExit="ClearHitTracking"/>
				</TrackTimeInAction>
			</Activities>
		</Action>
		<Action Name="Ability_FireStaff_Fireball" FragmentName="Ability_FireStaff_Fireball">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_Fireball"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_Fireball" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Siege" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Firestaff_Fireball" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Fire"/>
					</Or>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<Not>
						<IsMounted/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" FragmentName="" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Firestaff_Fireball" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Ult">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage_Timer"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ModifyStatusEffects>
								<Default>
									<EffectsToApplyOnEnter>
										<EffectId EffectId="Status_Ultimate_Firemage_Timer"/>
									</EffectsToApplyOnEnter>
								</Default>
							</ModifyStatusEffects>
							<CastSpell>
								<Default SpellName="Spell_Ultimate_Firemage" TakeDurability="false"/>
							</CastSpell>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Pyro Haste">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Fire"/>
							<IfAbilityActive AbilityName="Passive_Firestaff_Pyro_Haste"/>
							<Not>
								<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
							</Not>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste"/>
									<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Firestaff_Fireball" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" CheckForFreeCooldown="true"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Firestaff_Fireball"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<CameraRelativeFacing>
					<Default TurnRate="0.0" UseExponentialTurnRate="false" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCamera" TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
					<Conditional Name="AlignToCameraFast" TurnRate="0.90" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
				</CameraRelativeFacing>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Fireball Projectile">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastFireProjectile"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_Ability_Firestaff_Fireball"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Unset AttackAction on CanTransition" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Passive_Firestaff_FireMage_DmgNoDmg_Cleanup">
			<ActivationCondition>
				<And>
					<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_DmgNoDmg"/>
					<IfMannequinTag TagName="MagicStaff"/>
					<IfMannequinTag TagName="Fire"/>
					<IfCombatStatus InCombat="true"/>
					<Not>
						<IfActionStatus ActionName="Passive_Firestaff_FireMage_DmgNoDmg_Cleanup" Status="Installed"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_DmgNoDmg"/>
					</Not>
					<And>
						<Not>
							<IfMannequinTag TagName="MagicStaff"/>
						</Not>
						<Not>
							<IfMannequinTag TagName="Fire"/>
						</Not>
					</And>
					<IfCombatStatus InCombat="false"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="Status_Passive_Firestaff_FireMage_DmgNoDmg"/>
							<EffectId EffectId="Status_Passive_Firestaff_FireMage_DmgNoDmg_Timer"/>
						</EffectsToRemoveOnExit>
					</Default>
					<Conditional Name="Passive_Firestaff_FireMage_DmgNoDmg_Inactive">
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Status_Passive_Firestaff_FireMage_DmgNoDmg_Timer"/>
						</EffectsToApplyOnEnter>
					</Conditional>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="Passive_Firestaff_FireMage_DmgFullMana_Detect">
			<ActivationCondition>
				<And>
					<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_DmgFullMana"/>
					<IfMannequinTag TagName="MagicStaff"/>
					<IfMannequinTag TagName="Fire"/>
					<IfManaValue ComparisonType="GreaterThanOrEqual" ComparisonValueIsPercentage="True" ComparisonValue="0.5"/>
					<Not>
						<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_FireMage_DmgFullMana"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_DmgFullMana"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="MagicStaff"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="Fire"/>
					</Not>
					<IfManaValue ComparisonType="LessThan" ComparisonValueIsPercentage="True" ComparisonValue="0.5"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Status_Passive_Firestaff_FireMage_DmgFullMana"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="Status_Passive_Firestaff_FireMage_DmgFullMana"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="Ultimate_Firemage_Detect">
			<ActivationCondition>
				<And>
					<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
					<IfMannequinTag TagName="MagicStaff"/>
					<IfMannequinTag TagName="Fire"/>
					<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_Ultimate"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="MagicStaff"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="Fire"/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="Status_Ultimate_Firemage"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Status_Ultimate_Firemage_DMG"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="Status_Ultimate_Firemage_DMG"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="FireStaff_LowHealth_FireDmgBonus">
			<ActivationCondition>
				<And>
					<IfMannequinTag TagName="MagicStaff"/>
					<IfMannequinTag TagName="Fire"/>
					<IfAbilityActive AbilityName="PassiveFire25PowerAt25Health"/>
					<IfHealthPercentage Name="Health_Low" Comparison="LessThan" Percentage="0.25"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfHealthPercentage Name="Health_High" Comparison="GreaterThan" Percentage="0.25"/>
					<Not>
						<IfMannequinTag TagName="Fire"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="MagicStaff"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="FireStaff_LowHealth_FireDmgBonus"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="FireStaff_LowHealth_FireDmgBonus"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="FireStaff_RemoveEffects">
			<ActivationCondition>
				<And>
					<IfMannequinTag TagName="MagicStaff"/>
					<IfMannequinTag TagName="Fire"/>
					<Or>
						<IfAbilityActive AbilityName="Passive_Firestaff_Pyro_Haste"/>
					</Or>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfMannequinTag TagName="Fire"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="MagicStaff"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter/>
						<EffectsToRemoveOnExit>
							<EffectId EffectId="Status_Passive_Firestaff_Pyro_Haste"/>
						</EffectsToRemoveOnExit>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="FireStaff_FlameThrower_Stagger_CD">
			<ActivationCondition>
				<And>
					<IfActionStatus ActionName="Ability_Fire_Staff_FlameThrower" Status="Installed"/>
					<IfDamagedByPowerLevel Comparison="GreaterThan" Value="0"/>
					<Not>
						<IfExternalCondition ConditionName="Ability_Startup"/>
					</Not>
					<IfAbilityActive AbilityName="Upgrade_Firestaff_FlameThrower_NoCooldown"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfActionStatus ActionName="Ability_Fire_Staff_FlameThrower" Status="Installed"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="MagicStaff"/>
					</Not>
				</Or>
			</DeactivationCondition>
			<Activities>
				<SetCooldownTimer Comment="Activate Reduced CoolDown after Stagger">
					<Default AbilityID="Ability_Firestaff_FlameThrower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON" OnEnter="2.5" OnExit="NoEffect"/>
				</SetCooldownTimer>
			</Activities>
		</Action>
	</Actions>
	<Conditions>
		<And Name="Magic_Exit">
			<Or>
				<IfMannequinTag TagName="MagicGauntlet"/>
				<IfMannequinTag TagName="MagicStaff"/>
			</Or>
			<Or>
				<IfInput InputName="aim_draw_release_virtual"/>
				<Not>
					<IfInput InputName="aim_draw_active_virtual"/>
				</Not>
				<IfInput InputName="Placing_Building"/>
			</Or>
		</And>
		<And Name="Magic_Aim_Exit">
			<Or>
				<IfInput InputName="Placing_Building"/>
				<IfInput InputName="attack_blockbreaker"/>
				<IfInput InputName="Q_Ability_Virtual"/>
				<IfInput InputName="R_Ability_Virtual"/>
				<IfInput InputName="aim_draw_active_virtual"/>
				<IfInput InputName="block_active_virtual"/>
				<IfInput InputName="toggleInventoryWindow"/>
				<IfInput InputName="toggleChatComponent"/>
				<IfInput InputName="toggleGuildComponent"/>
				<IfInput InputName="toggleJournalComponent"/>
				<IfInput InputName="toggleMenuComponent"/>
				<IfInput InputName="toggleMapComponent"/>
				<IfInput InputName="toggleSkillsComponent"/>
			</Or>
		</And>
		<And Name="FireStaff_FlameThrower_Exit">
			<IfMannequinTag TagName="Fire"/>
			<Or>
				<IfInput InputName="Placing_Building"/>
				<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_FlameThrower"/>
				<IfInput InputName="aim_draw_active_virtual"/>
				<IfInput InputName="block_active_virtual"/>
				<IfInput InputName="PlayerActionMapDisabled"/>
				<IfInput InputName="toggleInventoryWindow"/>
				<IfInput InputName="toggleChatComponent"/>
				<IfInput InputName="toggleGuildComponent"/>
				<IfInput InputName="toggleJournalComponent"/>
				<IfInput InputName="toggleMenuComponent"/>
				<IfInput InputName="toggleMapComponent"/>
				<IfInput InputName="toggleSkillsComponent"/>
			</Or>
		</And>
		<And Name="Magic_Staff_Aim_Exit">
			<IfMannequinTag TagName="MagicStaff"/>
			<Or>
				<IfInput InputName="Placing_Building"/>
				<IfInput InputName="aim_draw_active_virtual"/>
				<IfInput InputName="block_active_virtual"/>
				<IfInput InputName="PlayerActionMapDisabled"/>
				<IfInput InputName="toggleInventoryWindow"/>
				<IfInput InputName="toggleChatComponent"/>
				<IfInput InputName="toggleGuildComponent"/>
				<IfInput InputName="toggleJournalComponent"/>
				<IfInput InputName="toggleMenuComponent"/>
				<IfInput InputName="toggleMapComponent"/>
				<IfInput InputName="toggleSkillsComponent"/>
			</Or>
		</And>
		<And Name="Condition_Upgrade_Firestaff_MeteorShower_Base">
			<And>
				<IfMannequinTag TagName="MagicStaff"/>
				<Not>
					<IfAbilityActive AbilityName="Upgrade_Firestaff_MeteorShower_Mana"/>
				</Not>
			</And>
		</And>
		<And Name="Condition_Upgrade_Firestaff_MeteorShower_AddDisease">
			<And>
				<IfMannequinTag TagName="MagicStaff"/>
				<IfAbilityActive AbilityName="Upgrade_Firestaff_MeteorShower_Mana"/>
			</And>
		</And>
		<And Name="Condition_Upgrade_Firestaff_MeteorShower_Extra">
			<And>
				<IfMannequinTag TagName="MagicStaff"/>
				<IfAbilityActive AbilityName="Upgrade_Firestaff_MeteorShower_Extra"/>
			</And>
		</And>
		<And Name="Condition_Upgrade_Firestaff_Incinerate_Base">
			<And>
				<IfMannequinTag TagName="MagicStaff"/>
				<Not>
					<IfAbilityActive AbilityName="Upgrade_Firestaff_Incinerate_Burn"/>
				</Not>
			</And>
		</And>
		<And Name="Condition_Upgrade_Firestaff_Incinerate_Burn">
			<And>
				<IfMannequinTag TagName="MagicStaff"/>
				<IfAbilityActive AbilityName="Upgrade_Firestaff_Incinerate_Burn"/>
			</And>
		</And>
		<And Name="Condition_Upgrade_Firestaff_FlameThrower_Rng">
			<And>
				<IfMannequinTag TagName="MagicStaff"/>
				<IfAbilityActive AbilityName="Upgrade_Firestaff_FlameThrower_Rng"/>
			</And>
		</And>
		<And Name="Magic_Channel_Success">
			<IfMannequinTag TagName="MagicStaff"/>
			<ActionConditionSpellChannelingState Value="SpellChanneled"/>
		</And>
		<IfInput Name="Shoot_NoCharge_FG" InputName="aim_shoot_release"/>
		<Or Name="Magic_Charge_Release">
			<IfInput InputName="aim_shoot_release"/>
			<Not>
				<IfInput InputName="aim_shoot_depressed"/>
			</Not>
		</Or>
		<And Name="Magic_Charge">
			<IfInput InputName="aim_shoot_hold"/>
		</And>
		<And Name="FlameThrower_No_Upgrade">
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Firestaff_FlameThrower_Rng"/>
			</Not>
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Firestaff_FlameThrower_Dmg"/>
			</Not>
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Firestaff_FlameThrower_NoCooldown"/>
			</Not>
		</And>
		<And Name="FlameThrower_DMG_Upgrade">
			<IfAbilityActive AbilityName="FlameThrower_Damage"/>
			<Not>
				<IfAbilityActive AbilityName="FlameThrower_AoE"/>
			</Not>
		</And>
		<And Name="FlameThrower_Radius_Upgrade">
			<IfAbilityActive AbilityName="FlameThrower_AoE"/>
			<Not>
				<IfAbilityActive AbilityName="FlameThrower_Speed"/>
			</Not>
		</And>
		<And Name="FlameThrower_Speed_Upgrade">
			<IfAbilityActive AbilityName="FlameThrower_Speed"/>
		</And>
		<And Name="FlameThrower_Normal_Flame">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="FlameThrower_AoE"/>
					<IfAbilityActive AbilityName="FlameThrower_Speed"/>
				</Or>
			</Not>
		</And>
		<And Name="FlameThrower_Large_Flame">
			<Or>
				<IfAbilityActive AbilityName="FlameThrower_AoE"/>
				<IfAbilityActive AbilityName="FlameThrower_Speed"/>
			</Or>
		</And>
		<And Name="FlameThrower_Extra_Damage">
			<Or>
				<IfAbilityActive AbilityName="FlameThrower_Damage"/>
				<IfAbilityActive AbilityName="FlameThrower_AoE"/>
				<IfAbilityActive AbilityName="FlameThrower_Speed"/>
			</Or>
		</And>
		<And Name="FlameThrower_Mana_Check">
			<IfManaCost ComparisonType="LessThanOrEqual" CostID="FireStaff_FlameThrower_Cancel" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
		</And>
		<And Name="FireStaff_Siege_Recharge_ManaCheck">
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Siege_Recharge_ManaCheck" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
		</And>
		<And Name="FireStaff_Siege_Kickout_ManaCheck">
			<IfManaCost ComparisonType="LessThan" CostID="FireStaff_Siege_Recharge_ManaCheck" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
		</And>
		<And Name="Fire_Siege_Shoot">
			<And>
				<IfInput InputName="attack_shoot"/>
				<IfMannequinMarker MarkerName="Magic_IsReadying_Siege"/>
				<IfMannequinTag TagName="Fire"/>
				<Not>
					<IfInput InputName="aim_draw_active_virtual"/>
				</Not>
			</And>
		</And>
		<And Name="Siege_No_Upgrade">
			<Not>
				<IfAbilityActive AbilityName="Siege_Damage"/>
			</Not>
		</And>
		<And Name="Siege_Damage_Upgrade">
			<IfAbilityActive AbilityName="Siege_Damage"/>
			<Not>
				<IfAbilityActive AbilityName="Siege_Knockdown"/>
			</Not>
		</And>
		<And Name="Siege_Knockdown_Upgrade">
			<IfAbilityActive AbilityName="Siege_Knockdown"/>
			<Not>
				<IfAbilityActive AbilityName="Siege_ScorchedEarth"/>
			</Not>
		</And>
		<And Name="Siege_ScorchedEarth_Upgrade">
			<IfAbilityActive AbilityName="Siege_ScorchedEarth"/>
		</And>
		<And Name="Pillar_No_Upgrade">
			<Not>
				<IfAbilityActive AbilityName="Pillar_Damage"/>
			</Not>
			<Not>
				<IfAbilityActive AbilityName="Pillar_ManaGain"/>
			</Not>
		</And>
		<And Name="Pillar_DMG_Upgrade">
			<IfAbilityActive AbilityName="Pillar_Damage"/>
			<Not>
				<IfAbilityActive AbilityName="Pillar_ManaGain"/>
			</Not>
		</And>
		<And Name="Pillar_Mana_Upgrade">
			<IfAbilityActive AbilityName="Pillar_ManaGain"/>
		</And>
		<And Name="Storm_No_Upgrade">
			<Not>
				<IfAbilityActive AbilityName="Storm_Mana"/>
			</Not>
		</And>
		<And Name="Storm_Mana_Upgrade">
			<IfAbilityActive AbilityName="Storm_Mana"/>
			<Not>
				<IfAbilityActive AbilityName="Storm_Radius"/>
			</Not>
		</And>
		<And Name="Storm_Radius_Upgrade">
			<IfAbilityActive AbilityName="Storm_Radius"/>
			<Not>
				<IfAbilityActive AbilityName="Storm_CastDistance"/>
			</Not>
		</And>
		<And Name="Storm_Cast_Upgrade">
			<And>
				<IfAbilityActive AbilityName="Storm_CastDistance"/>
			</And>
		</And>
		<And Name="Speed_No_Upgrade">
			<IfAbilityActive AbilityName="Ability_Firestaff_BurnOut"/>
		</And>
		<And Name="Burnout_AOEOnEnd_Upgrade">
			<IfAbilityActive AbilityName="Upgrade_Firestaff_BurnOut_Aoe"/>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
		</And>
		<And Name="HeavyProj_No_Upgrade">
			<Not>
				<IfAbilityActive AbilityName="PassiveFireProjRange"/>
			</Not>
			<Not>
				<IfAbilityActive AbilityName="PassiveFireProjSpeed"/>
			</Not>
		</And>
		<And Name="Proj_Range_Upgrade">
			<IfMannequinTag TagName="Fire"/>
			<IfAbilityActive AbilityName="PassiveFireProjRange"/>
			<Not>
				<IfAbilityActive AbilityName="PassiveFireProjSpeed"/>
			</Not>
		</And>
		<And Name="Proj_Speed_Upgrade">
			<IfMannequinTag TagName="Fire"/>
			<IfAbilityActive AbilityName="PassiveFireProjSpeed"/>
			<IfAbilityActive AbilityName="PassiveFireProjRange"/>
		</And>
		<And Name="Incinerate_No_Upgrade">
			<And>
				<Not>
					<IfAbilityActive AbilityName="Incinerate_Combust"/>
				</Not>
				<Not>
					<IfAbilityActive AbilityName="Incinerate_Radius"/>
				</Not>
				<Not>
					<IfAbilityActive AbilityName="Incinerate_Damage"/>
				</Not>
			</And>
		</And>
		<And Name="Incinerate_Combust_Upgrade">
			<IfAbilityActive AbilityName="Incinerate_Combust"/>
			<IfAbilityActive AbilityName="Incinerate_Radius"/>
			<IfAbilityActive AbilityName="Incinerate_Damage"/>
		</And>
		<And Name="Incinerate_Damage_Upgrade">
			<IfAbilityActive AbilityName="Incinerate_Damage"/>
			<Not>
				<IfAbilityActive AbilityName="Incinerate_Combust"/>
			</Not>
			<Not>
				<IfAbilityActive AbilityName="Incinerate_Radius"/>
			</Not>
		</And>
		<And Name="Incinerate_Radius_Upgrade">
			<IfAbilityActive AbilityName="Incinerate_Radius"/>
			<IfAbilityActive AbilityName="Incinerate_Damage"/>
			<Not>
				<IfAbilityActive AbilityName="Incinerate_Combust"/>
			</Not>
		</And>
		<Or Name="CanAttack_Light_FireStaff">
			<And>
				<Not>
					<IfInput InputName="attack_primary"/>
				</Not>
				<Not>
					<IfInput InputName="attack_primary_hold"/>
				</Not>
			</And>
			<And>
				<Or>
					<IfInput InputName="attack_primary"/>
					<IfInput InputName="attack_primary_hold"/>
				</Or>
				<Not>
					<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_ManaOnHit"/>
				</Not>
				<IfManaCost ComparisonType="LessThan" CostID="FireStaff_Heavy" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</And>
		</Or>
		<And Name="CanAttack_Heavy_FireStaff">
			<Or>
				<IfAbilityActive AbilityName="Passive_Firestaff_FireMage_ManaOnHit"/>
				<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Heavy" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Or>
		</And>
		<And Name="CanAttack_Pillar">
			<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_PillarofFire"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_PillarOfFire" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Firestaff_PillarofFire" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_FireSpeed">
			<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_BurnOut"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Speed_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Firestaff_BurnOut" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Storm">
			<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_MeteorShower"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Storm" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Firestaff_MeteorShower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_FlameThrower">
			<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_FlameThrower"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_FlameThrower_Cancel" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Firestaff_FlameThrower" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Incinerate">
			<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_Incinerate"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Incinerate" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Firestaff_Incinerate" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Siege">
			<IfActiveAbilityMoveName AbilityName="Ability_Fire_Staff_Siege_Intro"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Incinerate" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Fire_Staff_Siege_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Fireball">
			<IfActiveAbilityMoveName AbilityName="Ability_Firestaff_Fireball"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="FireStaff_Siege" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Firestaff_Fireball" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="Passive_Firestaff_FireMage_DmgNoDmg_InActive">
			<Not>
				<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_FireMage_DmgNoDmg_Timer"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="Status_Passive_Firestaff_FireMage_DmgNoDmg"/>
			</Not>
		</And>
	</Conditions>
</ActionList>

